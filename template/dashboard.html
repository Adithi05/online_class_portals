{% extends "base.html" %}
{% block title %}Dashboard - Online Classes Portal{% endblock %}

{% block content %}
<h2>Dashboard</h2>

{% if current_user.role == 'tutor' %}
  <p><a href="{{ url_for('upload_course') }}" class="btn-primary">Upload New Course</a></p>
{% endif %}

{% if courses %}
  <ul class="course-list" aria-label="List of courses">
    {% for course in courses %}
      <li>
        <h3><a href="{{ url_for('course_detail', course_id=course.id) }}">{{ course.title }}</a></h3>
        <p>{{ course.description|truncate(100) }}</p>

        {% if current_user.role == 'tutor' and course.uploader_id == current_user.id %}
        <form action="{{ url_for('delete_course', course_id=course.id) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this course?');" style="display:inline;">
          <button type="submit" class="btn-danger" aria-label="Delete {{ course.title }}">Delete</button>
        </form>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No courses available.</p>
{% endif %}
{% endblock %}
